!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).tbPopup=e()}(this,(function(){"use strict";const t={title:{text:"标题",textAlign:"center"},width:"100vw",height:"30vh",content:document.createTextNode("内容"),footer:null,mask:!0,leftBtn:{text:"取消",callback:null},rightBtn:{text:"确定",callback:null}};return class{constructor(e){this.options=Object.assign({},t,e),this.createPopup()}createPopup(){this.popup=document.createElement("div"),this.popup.className="tb-popup",this.popup.style.width=this.options.width,this.popup.style.minHeight=this.options.height,this.createTitle(),this.createContent(),this.createMask(),document.body.appendChild(this.popup)}createTitle(){this.header=document.createElement("div"),this.header.className="tb-popup-header",this.title=document.createElement("div"),this.title.className="tb-popup-title",this.options.leftBtn&&(this.title.className+=" tb-popup-title-has-left-btn",this.leftBtn=document.createElement("div"),this.leftBtn.className="tb-popup-left-btn",this.leftBtn.textContent=this.options.leftBtn.text,this.leftBtn.addEventListener("click",(()=>{this.options.leftBtn.callback?this.options.leftBtn.callback():this.close()})),this.title.appendChild(this.leftBtn));const t=document.createElement("div");t.className="tb-popup-title-text",t.style.textAlign=this.options.title.textAlign,t.textContent=this.options.title.text,this.title.appendChild(t),this.options.rightBtn&&(this.title.className+=" tb-popup-title-has-right-btn",this.rightBtn=document.createElement("div"),this.rightBtn.className="tb-popup-right-btn",this.rightBtn.textContent=this.options.rightBtn.text,this.title.appendChild(this.rightBtn)),"center"===this.options.title.titleAlign&&(this.options.leftBtn||this.options.rightBtn)&&(this.title.className="tb-popup-title tb-popup-title-has-right-btn tb-popup-title-has-left-btn"),this.header.appendChild(this.title),this.popup.appendChild(this.header)}createContent(){if(this.content=document.createElement("div"),this.content.className="tb-popup-content","string"==typeof this.options.content){const t=document.getElementById(this.options.content).childNodes,e=document.createDocumentFragment();t.length>0&&t.forEach((t=>{e.appendChild(t.cloneNode(!0))})),this.content.appendChild(e)}else{if(!(this.options.content instanceof HTMLElement||this.options.content instanceof DocumentFragment))throw new Error("content参数类型错误, 请传入字符串或者dom节点");this.content.appendChild(this.options.content)}this.popup.appendChild(this.content)}createMask(){this.mask=document.createElement("div"),this.mask.style.width="100vw",this.mask.style.height="100vh",this.mask.style.backgroundColor="rgba(0,0,0,.5)",this.mask.style.position="fixed",this.mask.style.left=0,this.mask.style.bottom="-100vh",this.mask.style.zIndex=999,this.mask.style.transition="opacity .3s",this.mask.addEventListener("click",(()=>{this.close()})),document.body.appendChild(this.mask)}createClose(){this.close=document.createElement("div"),this.close.className="tb-popup-close",this.close.textContent="X",this.close.addEventListener("click",(()=>{this.close()})),this.popup.appendChild(this.close)}show(){this.mask.style.opacity=1,this.popup.style.bottom=0,this.mask.style.transform="translateY(-100vh)"}close(){this.popup.style.bottom="-100%",this.mask.style.opacity=0,this.popup.addEventListener("transitionend",(()=>{this.mask.style.transform="translateY(100vh)"}),{once:!0})}}}));
//# sourceMappingURL=index.js.map
